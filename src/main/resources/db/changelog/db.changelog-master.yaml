databaseChangeLog:
  - changeSet:
      id: 1
      author: "SimoAcharouaou"
      changes:
        - createTable:
            tableName: "users"
            columns:
              - column:
                  name: "id"
                  type: "BIGINT"
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: "full_name"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
              - column:
                  name: "username"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: "email"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: "password"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
              - column:
                  name: "location"
                  type: "VARCHAR(255)"
              - column:
                  name: "phone_number"
                  type: "VARCHAR(20)"
  - changeSet:
      id: 2
      author: "SimoAcharouaou"
      changes:
        - createTable:
            tableName: "roles"
            columns:
              - column:
                  name: "id"
                  type: "BIGINT"
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: "name"
                  type: "VARCHAR(100)"
                  constraints:
                    nullable: false
                    unique: true
  - changeSet:
      id: 3
      author: "SimoAcharouaou"
      changes:
        - createTable:
            tableName: "user_roles"
            columns:
              - column:
                  name: "user_id"
                  type: "BIGINT"
                  constraints:
                    nullable: false
              - column:
                  name: "role_id"
                  type: "BIGINT"
                  constraints:
                    nullable: false
        - addForeignKeyConstraint:
            baseTableName: "user_roles"
            baseColumnNames: "user_id"
            referencedTableName: "users"
            referencedColumnNames: "id"
            constraintName: "fk_user_roles_user"
        - addForeignKeyConstraint:
            baseTableName: "user_roles"
            baseColumnNames: "role_id"
            referencedTableName: "roles"
            referencedColumnNames: "id"
            constraintName: "fk_user_roles_role"

  - changeSet:
      id: 4
      author: "SimoAcharouaou"
      changes:
        - insert:
            tableName: "roles"
            columns:
              - column:
                  name: "id"
                  valueNumeric: "1"
              - column:
                  name: "name"
                  value: "USER"
        - insert:
            tableName: "roles"
            columns:
              - column:
                  name: "id"
                  valueNumeric: "2"
              - column:
                  name: "name"
                  value: "ADMIN"
  - changeSet:
      id: 5
      author: "SimoAcharouaou"
      changes:
        - createTable:
            tableName: "refresh_tokens"
            columns:
              - column:
                  name: "id"
                  type: "BIGINT"
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: "token"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: "username"
                  type: "VARCHAR(255)"
                  constraints:
                    nullable: false
              - column:
                  name: "expiry_date"
                  type: "TIMESTAMP"
                  constraints:
                    nullable: false
              - column:
                  name: "revoked"
                  type: "BOOLEAN"
                  constraints:
                    nullable: false
  - changeSet:
      id: 6
      author: "SimoAcharouaou"
      changes:
        - addColumn:
            tableName: "users"
            columns:
              - column:
                  name: "is_active"
                  type: "BOOLEAN"
                  defaultValueBoolean: true
                  constraints:
                    nullable: false
  - changeSet:
      id: 7
      author: "SimoAcharouaou"
      changes:
        - createTable:
            tableName: "permissions"
            columns:
              - column:
                  name: "id"
                  type: "BIGINT"
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                    name: "name"
                    type: "VARCHAR(255)"
                    constraints:
                        nullable: false
                        unique: true
        - createTable:
            tableName: "role_permissions"
            columns:
              - column:
                  name: "role_id"
                  type: "BIGINT"
                  constraints:
                    nullable: false
              - column:
                  name: "permission_id"
                  type: "BIGINT"
                  constraints:
                    nullable: false
        - addForeignKeyConstraint:
            baseTableName: "role_permissions"
            baseColumnNames: "role_id"
            referencedTableName: "roles"
            referencedColumnNames: "id"
            constraintName: "fk_role_permissions_role"

        - addForeignKeyConstraint:
            baseTableName: "role_permissions"
            baseColumnNames: "permission_id"
            referencedTableName: "permissions"
            referencedColumnNames: "id"
            constraintName: "fk_role_permissions_permission"

  - changeSet:
      id: 8
      author: "SimoAcharouaou"
      changes:
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "CREATE_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "READ_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "UPDATE_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "DELETE_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "BLOCK_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "UNBLOCK_USER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "ASSIGN_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "REMOVE_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "CREATE_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "READ_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "UPDATE_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "DELETE_ROLE"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "ASSIGN_PERMISSION"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "REMOVE_PERMISSION"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "CREATE_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "READ_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "UPDATE_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "DELETE_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "ASSIGN_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "MANAGE_PROJECT_TEAM"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "PLAN_MEETINGS"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "VIEW_MEETINGS"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "COMMENT_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "CREATE_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "READ_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "UPDATE_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "DELETE_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "SUBMIT_TASK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "REVIEW_SUBMISSION"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "EVALUATE_MEMBER"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "VIEW_EVALUATIONS"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "GIVE_FEEDBACK"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "VALIDATE_PROJECT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "MODERATE_CONTENT"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "VIEW_ANALYTICS"
        - insert:
            tableName: "permissions"
            columns:
              - column:
                  name: "name"
                  value: "ACCESS_DASHBOARD"
